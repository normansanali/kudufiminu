<!doctype html><html lang=en><head><meta charset=utf-8><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=referrer content="no-referrer"><meta name=description content="While compiling (with Linux Server release 6.1) getting error &amp;quot;error: lvalue required as unary '&amp;amp;' operand&amp;quot; but the same code compiled successfully with Red Hat Enterprise Linux AS release 3. Why so? How to correct this?"><meta name=robots content="index,follow,noarchive"><link href="https://fonts.googleapis.com/css?family=Open+Sans:400|Old+Standard+TT:400&display=swap" rel=stylesheet media=print type=text/css onload='this.media="all"'><title>error: lvalue required as unary &amp;amp; operand</title><link rel=canonical href=./error-lvalue-required-as-unary-operand.html><style>*{border:0;font:inherit;font-size:100%;vertical-align:baseline;margin:0;padding:0;color:#000;text-decoration-skip:ink}body{font-family:open sans,myriad pro,Myriad,sans-serif;font-size:17px;line-height:160%;color:#1d1313;max-width:700px;margin:auto}p{margin:20px 0}a img{border:none}img{margin:10px auto;max-width:100%;display:block}.left-justify{float:left}.right-justify{float:right}pre,code{font:12px Consolas,liberation mono,Menlo,Courier,monospace;background-color:#f7f7f7}code{font-size:12px;padding:4px}pre{margin-top:0;margin-bottom:16px;word-wrap:normal;padding:16px;overflow:auto;font-size:85%;line-height:1.45}pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:0 0;border:0}pre code{display:inline;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}pre code::before,pre code::after{content:normal}em,q,em,dfn{font-style:italic}.sans,html .gist .gist-file .gist-meta{font-family:open sans,myriad pro,Myriad,sans-serif}.mono,pre,code,tt,p code,li code{font-family:Menlo,Monaco,andale mono,lucida console,courier new,monospace}.heading,.serif,h1,h2,h3{font-family:old standard tt,serif}strong{font-weight:600}q:before{content:"\201C"}q:after{content:"\201D"}del,s{text-decoration:line-through}blockquote{font-family:old standard tt,serif;text-align:center;padding:50px}blockquote p{display:inline-block;font-style:italic}blockquote:before,blockquote:after{font-family:old standard tt,serif;content:'\201C';font-size:35px;color:#403c3b}blockquote:after{content:'\201D'}hr{width:40%;height:1px;background:#403c3b;margin:25px auto}h1{font-size:35px}h2{font-size:28px}h3{font-size:22px;margin-top:18px}h1 a,h2 a,h3 a{text-decoration:none}h1,h2{margin-top:28px}#sub-header,.date{color:#403c3b;font-size:13px}#sub-header{margin:0 4px}#nav h1 a{font-size:35px;color:#1d1313;line-height:120%}.posts_listing a,#nav a{text-decoration:none}li{margin-left:20px}ul li{margin-left:5px}ul li{list-style-type:none}ul li:before{content:"\00BB \0020"}#nav ul li:before,.posts_listing li:before{content:'';margin-right:0}#content{text-align:left;width:100%;font-size:15px;padding:60px 0 80px}#content h1,#content h2{margin-bottom:5px}#content h2{font-size:25px}#content .entry-content{margin-top:15px}#content .date{margin-left:3px}#content h1{font-size:30px}.highlight{margin:10px 0}.posts_listing{margin:0 0 50px}.posts_listing li{margin:0 0 25px 15px}.posts_listing li a:hover,#nav a:hover{text-decoration:underline}#nav{text-align:center;position:static;margin-top:60px}#nav ul{display:table;margin:8px auto 0}#nav li{list-style-type:none;display:table-cell;font-size:15px;padding:0 20px}#links{display:flex;justify-content:space-between;margin:50px 0 0}#links :nth-child(1){margin-right:.5em}#links :nth-child(2){margin-left:.5em}#not-found{text-align:center}#not-found a{font-family:old standard tt,serif;font-size:200px;text-decoration:none;display:inline-block;padding-top:225px}@media(max-width:750px){body{padding-left:20px;padding-right:20px}#nav h1 a{font-size:28px}#nav li{font-size:13px;padding:0 15px}#content{margin-top:0;padding-top:50px;font-size:14px}#content h1{font-size:25px}#content h2{font-size:22px}.posts_listing li div{font-size:12px}}@media(max-width:400px){body{padding-left:20px;padding-right:20px}#nav h1 a{font-size:22px}#nav li{font-size:12px;padding:0 10px}#content{margin-top:0;padding-top:20px;font-size:12px}#content h1{font-size:20px}#content h2{font-size:18px}.posts_listing li div{font-size:12px}}@media(prefers-color-scheme:dark){*,#nav h1 a{color:#fdfdfd}body{background:#121212}pre,code{background-color:#262626}#sub-header,.date{color:#bababa}hr{background:#ebebeb}}</style></head><body><section id=nav><h1><a href=./index.html>SkyBlog</a></h1><ul><li><a href=./index.xml>Rss</a></li><li><a href=./sitemap.xml>Sitemap</a></li></ul></section><section id=content><h1>error: lvalue required as unary &amp;amp; operand</h1><div id=sub-header>September 2024 · 3 minute read</div><div class=entry-content><img src=https://cdn.statically.io/img/cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon@2.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto><p>While compiling (with Linux Server release 6.1)</p><pre><code>strftime(AppTime, sizeof(AppTime),"%Y/%m/%d %T", localtime(&amp;((long)u32_Time))); </code></pre><p>getting error "error: lvalue required as unary '&' operand"</p><p>but the same code compiled successfully with Red Hat Enterprise Linux AS release 3.</p><p>Why so? How to correct this?</p><span class=d-none itemprop=commentCount>2</span><h2 class=mb0 data-answercount=2>2 Answers</h2><p>The address-operator <code>&</code> requires a variable to take the address from. The result of your cast <code>(long)u32_Time</code> is a temporary that does not necessarily reside in memory and therefore has no address that could be taken. So if that piece of code ever compiled somewhere it was a nonstandard compiler extension.</p><p>The standard, §5.3.1,3 demands:</p><p>The result of the unary & operator is a pointer to its operand. The operand shall be an lvalue [...]</p><p><strong>How to fix this:</strong> <code>std::localtime</code> expects a pointer to a <code>std::time_t</code> so you best provide that. You did not provide any explanation or further code, so I can only guess that <code>u32_Time</code> is some 4 byte unsigned arithmetic type that is supposed to represent a time in some manner. How that is properly converted into a <code>std::time_t</code> depends on how your compiler implements the latter and how you got the value of the further. Simply applying a C-cast is not portable, and casting to <code>long</code> is even less portable.<br><strong>If, and only if</strong> the <code>std::time_t</code> on your current platform is also a unsigned 32 bit type using the same representation as your <code>u32_Time</code>, it might suffice to use</p><pre><code> localtime(reinterpret_cast&lt;std::time_t*&gt;(&amp;u32_Time)); </code></pre><p>More portable would be storing the value in the correct data type first:</p><pre><code> std::time_t time = u32_Time; localtime(&amp;time); </code></pre><p>That way you will get the necessary warnings and/or errors if <code>time_t</code> and the type of <code>u32_Time</code> are not compatible.</p><p>I would strongly advice against using C-casts, because once you have to port this piece of code to another platform you will have no means to find that nasty cast easily.</p><span class=d-none itemprop=commentCount>0</span><p>It's probably best to start with what the error means. An "lvalue" is something that appears on the left side of an equals sign. What it means is that your argument to the "address of" operator (&) must be something that you could assign to. In your case, this isn't syntactically correct:</p><pre><code>(long)u32_Time = 0; </code></pre><p>The reason for this restriction is that the & operator returns the address of something that is stored somewhere. (long)u32_Time isn't stored somewhere, but u32_Time is.</p><p>This might have worked ok on more tolerant compilers because it would allocate some space for the long representation of u32_Time and then give you a pointer to that, but I wouldn't count on that working (as can be seen in Linux Server release 6.1).</p><p>To fix this, you can just create a new variable and take it's address instead:</p><pre><code>long long_Time = (long)u32_Time; strftime(AppTime, sizeof(AppTime),"%Y/%m/%d %T", localtime(&amp;long_Time)); </code></pre><p>However, that's still not perfect. localtime expects a time_t pointer, not a long pointer, and while they might be the same on your platform, you'd be better off with:</p><pre><code>time_t time_t_Time = (time_t)u32_Time; strftime(AppTime, sizeof(AppTime),"%Y/%m/%d %T", localtime(&amp;time_t_Time)); </code></pre><span class=d-none itemprop=commentCount></span><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmirpJawrLvVnqmfpJ%2Bse6S7zGiorp2jqbawutJoaWtvaG19c4KOnqmrp6Jiubety66cZqqVpsKqvsSdZJqrXaq7or7YZqapnaKWu6U%3D</p></div><div id=links><a href=./stevie-lynn-jones-wikipedia-parents-net-worth-net-worth.html>&#171;&nbsp;Exploring Stevie Lynn Jones' Wikipedia Details, Parents, Dating, Net Worth &amp;amp; Career</a>
<a href=./did-pablo-escobar-know-griselda-blanco.html>Did Pablo Escobar Know Griselda Blanco? He Knew of Her&nbsp;&#187;</a></div></section><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>